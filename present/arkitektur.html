<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WCTV â€” Systemets opbygning</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
</head>
<body>

<nav class="topnav">
  <a href="index.html" class="nav-home">
    <svg width="20" height="20" viewBox="0 0 32 32" fill="none">
      <rect x="2" y="8" width="28" height="18" rx="3" stroke="#3b82f6" stroke-width="1.8"/>
      <circle cx="16" cy="17" r="5" stroke="#60a5fa" stroke-width="1.8"/>
      <circle cx="16" cy="17" r="2" fill="#3b82f6"/>
      <rect x="12" y="4" width="8" height="5" rx="1.5" stroke="#475569" stroke-width="1.5"/>
      <circle cx="25" cy="12" r="1.5" fill="#22c55e"/>
    </svg>
    WCTV
  </a>
  <a href="overblik.html">Om projektet</a>
  <a href="arkitektur.html" class="active">Systemet</a>
  <a href="FLOWCHART.html">BesÃ¸gsforlÃ¸b</a>
  <a href="DB_RELATIONER.html">Database</a>
  <a href="DATAFLOW_DB.html">Dataflow</a>
  <a href="krav.html">Krav</a>
  <a href="demo.html">Demo</a>
</nav>

<div class="page">

  <div class="hero">
    <span class="hero-tag">Systemets opbygning</span>
    <h1>Hvordan er systemet sat sammen?</h1>
    <p>WCTV er bygget i fire lag, der taler sammen â€” fra det fysiske udstyr pÃ¥ toilettet til dashboardet pÃ¥ skÃ¦rmen.</p>
  </div>

  <!-- â”€â”€ De fire lag â”€â”€ -->
  <div class="section">
    <div class="section-title">Systemets fire lag</div>
    <div class="layer-stack">

      <div class="layer edge">
        <div class="layer-icon">ğŸ”Œ</div>
        <div class="layer-content">
          <div class="layer-name">Lag 1 â€” Udstyr pÃ¥ stedet</div>
          <div class="layer-parts">AdgangskortlÃ¦ser Â· Kamera Â· DÃ¸rsensor &nbsp;Â·&nbsp; <em>Simuleret i dette projekt</em></div>
        </div>
      </div>

      <div class="layer-arrow">â†“ sender besÃ¸gsdata</div>

      <div class="layer api">
        <div class="layer-icon">âš™ï¸</div>
        <div class="layer-content">
          <div class="layer-name">Lag 2 â€” Systemets hjerne (API)</div>
          <div class="layer-parts">Modtager data Â· Beregner tilstandsscore Â· Gemmer i database Â· Sender beskeder til dashboard</div>
        </div>
      </div>

      <div class="layer-arrow" style="display:flex;gap:4rem;justify-content:center;">
        <span>â†“ live-opdateringer</span>
        <span>â†“ nÃ¸gletal</span>
      </div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;">
        <div class="layer dash">
          <div class="layer-icon">ğŸ–¥ï¸</div>
          <div class="layer-content">
            <div class="layer-name">Lag 3 â€” Dashboard</div>
            <div class="layer-parts">Live-overblik Â· RengÃ¸ringsopgaver Â· Farvekodet status</div>
          </div>
        </div>
        <div class="layer kpi">
          <div class="layer-icon">ğŸ“Š</div>
          <div class="layer-content">
            <div class="layer-name">Lag 4 â€” NÃ¸gletal og rapporter</div>
            <div class="layer-parts">Ugentlige tal Â· Daglig konditionsgraf Â· Eksport</div>
          </div>
        </div>
      </div>

    </div>
    <p class="text-muted mt-2">Den stiplede forbindelse til udstyret skyldes, at kortlÃ¦ser, kamera og dÃ¸rsensor er simuleret i koden â€” ikke fysisk tilgÃ¦ngeligt i dette projekt.</p>
  </div>

  <!-- â”€â”€ Live-opdateringer â”€â”€ -->
  <div class="section">
    <div class="section-title">Live-opdateringer â€” hvordan holder dashboardet sig opdateret?</div>
    <div class="two-col">
      <div class="card">
        <div class="card-title" style="color:var(--text-1);margin-bottom:0.5rem;">Uden live-opdateringer</div>
        <p style="font-size:0.83rem;color:var(--text-3);line-height:1.6;">
          Dashboardet ville skulle genindlÃ¦se siden hvert sekund for at tjekke om noget er nyt. Det er langsomt og belaster systemet unÃ¸digt.
        </p>
      </div>
      <div class="card" style="border-color:rgba(59,130,246,0.4);">
        <div class="card-title" style="color:var(--blue-text);margin-bottom:0.5rem;">Med SignalR (vores lÃ¸sning)</div>
        <p style="font-size:0.83rem;color:var(--text-3);line-height:1.6;">
          Systemet <strong style="color:var(--text-2);">skubber</strong> automatisk en besked til dashboardet, hver gang noget Ã¦ndrer sig â€” prÃ¦cis som en app der modtager notifikationer. Ingen unÃ¸dig opdatering.
        </p>
      </div>
    </div>
    <div class="mt-2">
      <div class="table-wrap">
        <table>
          <thead><tr><th>Hvad sker der</th><th>HvornÃ¥r</th><th>Effekt pÃ¥ dashboardet</th></tr></thead>
          <tbody>
            <tr><td>Nogen scanner kortet</td><td>Straks ved besÃ¸gsstart</td><td>Toiletkortet viser "I brug" (gul pulserende prik)</td></tr>
            <tr><td>BesÃ¸get er slut</td><td>NÃ¥r dÃ¸ren Ã¥bnes igen</td><td>"I brug"-markeringen forsvinder</td></tr>
            <tr><td>Score og status beregnet</td><td>Sekunder efter besÃ¸get</td><td>Toiletkortets farve og score-ring opdateres</td></tr>
            <tr><td>ForvÃ¦rring opdaget</td><td>Straks efter scoring</td><td>Ny rengÃ¸ringsopgave dukker op pÃ¥ listen</td></tr>
            <tr><td>RengÃ¸ring kvitteret</td><td>NÃ¥r teamet trykker "fÃ¦rdig"</td><td>Opgaven forsvinder, kortet bliver grÃ¸nt igen</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- â”€â”€ Tilstandsvurdering â”€â”€ -->
  <div class="section">
    <div class="section-title">Hvordan vurderer systemet toiletstanden?</div>
    <div class="info-box blue mt-1" style="margin-bottom:1rem;">
      <strong>Kort fortalt:</strong> Kameraet tager et billede <em>inden</em> besÃ¸get og et billede <em>efter</em>. Systemet sammenligner de to billeder og beregner, om toilettet er blevet mere snavset.
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>Resultat</th><th>Hyppighed</th><th>Hvad sker der</th></tr></thead>
        <tbody>
          <tr>
            <td><span class="badge badge-green">Rent</span></td>
            <td>78 % af besÃ¸g</td>
            <td>Ingen handling â€” toiletkort forbliver grÃ¸nt</td>
          </tr>
          <tr>
            <td><span class="badge badge-orange">Lidt snavset</span></td>
            <td>12 % af besÃ¸g</td>
            <td>RengÃ¸ringsopgave med lav prioritet oprettes</td>
          </tr>
          <tr>
            <td><span class="badge badge-red">Skal rengÃ¸res</span></td>
            <td>7 % af besÃ¸g</td>
            <td>RengÃ¸ringsopgave med hÃ¸j prioritet oprettes</td>
          </tr>
          <tr>
            <td><span class="badge badge-gray">KontrollÃ©r</span></td>
            <td>3 % af besÃ¸g</td>
            <td>Systemet er usikkert â€” markeres til manuel kontrol</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="text-muted mt-2">Systemet viser ogsÃ¥ sin <strong>sikkerhedsprocent</strong> (0â€“100 %) â€” jo hÃ¸jere, jo mere sikker er vurderingen.</p>
  </div>

  <!-- â”€â”€ Privatlivsbeskyttelse â”€â”€ -->
  <div class="section">
    <div class="section-title">Privatlivsbeskyttelse â€” ingen overvÃ¥ger nogen</div>
    <div class="card-grid">
      <div class="card">
        <div style="font-size:1.4rem;margin-bottom:0.5rem;">ğŸ”’</div>
        <div class="card-title">Ingen person identificeres</div>
        <div class="card-desc">Adgangskortets ID krypteres, inden det gemmes. Der er ingen forbindelse mellem et besÃ¸g og en bestemt person.</div>
      </div>
      <div class="card">
        <div style="font-size:1.4rem;margin-bottom:0.5rem;">ğŸ“¸</div>
        <div class="card-title">Ingen videoovervÃ¥gning</div>
        <div class="card-desc">Kameraet aktiveres kun i det sekund, besÃ¸get starter og slutter. Der er intet lÃ¸bende kamerastream â€” det er spÃ¦rret i koden.</div>
      </div>
      <div class="card">
        <div style="font-size:1.4rem;margin-bottom:0.5rem;">ğŸš«</div>
        <div class="card-title">Systemet ser stedet, ikke personen</div>
        <div class="card-desc">Vurderingen handler udelukkende om toiletrummets tilstand â€” ikke om hvem der har brugt det.</div>
      </div>
    </div>
  </div>

  <!-- â”€â”€ Systemkomponent-diagram â”€â”€ -->
  <div class="section">
    <div class="section-title">Komponentoversigt</div>
    <div class="diagram-card">
      <div class="diagram-label">Alle dele af systemet og hvordan de taler sammen</div>
      <div class="mermaid">
flowchart LR
    subgraph Browser["ğŸ–¥ï¸ SkÃ¦rm (dashboard)"]
        UI["Visningsapp\nReact"]
    end
    subgraph API["âš™ï¸ Systemets hjerne"]
        REST["Kommunikationsled\nAPI-endpoints"]
        HUB["Live-beskeder\nSignalR"]
        MOTOR["Automatisk testmotor\n(simulerer besÃ¸g)"]
        SCORE["Tilstandsvurdering\n(scorer fÃ¸r/efter)"]
        EF["Database-forbindelse\nEF Core"]
    end
    DB[("ğŸ’¾ Database\nSQLite")]
    UI -->|"Henter data"| REST
    UI <-->|"Live-opdateringer"| HUB
    REST --> EF
    MOTOR --> SCORE
    MOTOR --> EF
    MOTOR --> HUB
    EF --> DB
      </div>
    </div>
  </div>

</div>

<script>
  mermaid.initialize({
    startOnLoad: true, theme: 'dark',
    themeVariables: {
      background: '#0f172a', primaryColor: '#1e3a5f',
      primaryTextColor: '#e2e8f0', primaryBorderColor: '#3b82f6',
      lineColor: '#475569', edgeLabelBackground: '#1e293b', fontSize: '13px'
    },
    flowchart: { curve: 'basis', useMaxWidth: true }
  });
</script>
</body>
</html>
