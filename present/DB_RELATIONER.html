<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WCTV ‚Äî Databasestruktur</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
</head>
<body>

<nav class="topnav">
  <a href="index.html" class="nav-home">
    <svg width="20" height="20" viewBox="0 0 32 32" fill="none">
      <rect x="2" y="8" width="28" height="18" rx="3" stroke="#3b82f6" stroke-width="1.8"/>
      <circle cx="16" cy="17" r="5" stroke="#60a5fa" stroke-width="1.8"/>
      <circle cx="16" cy="17" r="2" fill="#3b82f6"/>
      <rect x="12" y="4" width="8" height="5" rx="1.5" stroke="#475569" stroke-width="1.5"/>
      <circle cx="25" cy="12" r="1.5" fill="#22c55e"/>
    </svg>
    WCTV
  </a>
  <a href="overblik.html">Om projektet</a>
  <a href="arkitektur.html">Systemet</a>
  <a href="FLOWCHART.html">Bes√∏gsforl√∏b</a>
  <a href="DB_RELATIONER.html" class="active">Database</a>
  <a href="DATAFLOW_DB.html">Dataflow</a>
  <a href="krav.html">Krav</a>
  <a href="demo.html">Demo</a>
</nav>

<div class="page-wide">

  <div class="hero">
    <span class="hero-tag">Databasestruktur</span>
    <h1>Hvad gemmer systemet?</h1>
    <p>Databasen indeholder 8 sammenkoblede tabeller. Her kan du se, hvad de indeholder, og hvordan de h√¶nger sammen.</p>
  </div>

  <!-- ‚îÄ‚îÄ ER Diagram ‚îÄ‚îÄ -->
  <div class="section">
    <div class="diagram-card">
      <div class="diagram-label">Oversigt over tabeller og sammenh√¶nge ‚Äî stiplede linjer er l√∏se referencer (ikke h√•ndh√¶vede)</div>
      <div class="mermaid">
erDiagram
    TOILET {
        int Id PK
        string Navn
        string Lokation
        int B√•sNummer
        datetime OprettetDato
    }
    TOILETSTATUS {
        int ToiletId PK
        float AktuelScore
        string Status
        datetime SidstOpdateret
    }
    BES√òG {
        int Id PK
        int ToiletId FK
        datetime StartetKl
        datetime SluttetKl
        string Afslutnings√Örsag
        string Status
    }
    BILLEDE {
        int Id PK
        int Bes√∏gId FK
        string Type
        float Score
        float Sikkerhed
        datetime TagetKl
    }
    TILSTANDSVURDERING {
        int Id PK
        int Bes√∏gId FK
        float F√∏rScore
        float EfterScore
        float Sikkerhed
        string Resultat
        datetime VurderetKl
    }
    RENG√òRINGSOPGAVE {
        int Id PK
        int ToiletId FK
        int Bes√∏gId
        string Prioritet
        string Status
        float Sikkerhed
        datetime OprettetKl
        datetime P√•begyndtKl
    }
    KVITTERING {
        int Id PK
        int OpgaveId FK
        datetime F√¶rddigKl
        string Notat
    }
    H√ÜNDELSESLOG {
        int Id PK
        string H√¶ndelsesType
        int ToiletId
        int Bes√∏gId
        string Data
        datetime LoggetKl
    }

    TOILET               ||--||  TOILETSTATUS       : "aktuel status"
    TOILET               ||--o{  BES√òG              : "har bes√∏g"
    TOILET               ||--o{  RENG√òRINGSOPGAVE   : "har opgaver"
    BES√òG                ||--o{  BILLEDE            : "f√∏r + efter"
    BES√òG                ||--o|  TILSTANDSVURDERING : "vurdering"
    RENG√òRINGSOPGAVE     ||--o|  KVITTERING         : "kvitteres"
    TOILET               }o..o{  H√ÜNDELSESLOG       : "log"
    BES√òG                }o..o{  H√ÜNDELSESLOG       : "log"
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Tabel-forklaringer ‚îÄ‚îÄ -->
  <div class="section">
    <div class="section-title">Hvad indeholder hver tabel?</div>
    <div class="card-grid">

      <div class="card" style="border-left:3px solid var(--blue);">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">üöΩ</span>
          <div class="card-title">Toilet</div>
          <span class="badge badge-blue" style="margin-left:auto;">Stamdata</span>
        </div>
        <div class="card-desc">Grundoplysninger om hver toiletb√•s: navn, lokation og b√•snummer. Disse data √¶ndrer sig sj√¶ldent.</div>
      </div>

      <div class="card" style="border-left:3px solid var(--green);">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">üü¢</span>
          <div class="card-title">Toiletstatus</div>
          <span class="badge badge-green" style="margin-left:auto;">Live tilstand</span>
        </div>
        <div class="card-desc">Den aktuelle score og tilstand for hvert toilet ‚Äî opdateres efter hvert bes√∏g. √ân statuspost pr. toilet.</div>
      </div>

      <div class="card" style="border-left:3px solid var(--orange);">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">üë£</span>
          <div class="card-title">Bes√∏g</div>
          <span class="badge badge-orange" style="margin-left:auto;">H√¶ndelse</span>
        </div>
        <div class="card-desc">Registrerer hvert enkelt anonymt bes√∏g med start- og sluttidspunkt. Indeholder ingen personoplysninger.</div>
      </div>

      <div class="card" style="border-left:3px solid var(--purple);">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">üì∏</span>
          <div class="card-title">Billede</div>
          <span class="badge badge-purple" style="margin-left:auto;">Snapshot-data</span>
        </div>
        <div class="card-desc">Gemmer resultatet af hvert kamera-snapshot (score og sikkerhed) ‚Äî ikke selve billedet. To poster pr. bes√∏g: "f√∏r" og "efter".</div>
      </div>

      <div class="card" style="border-left:3px solid #ec4899;">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">ü§ñ</span>
          <div class="card-title">Tilstandsvurdering</div>
          <span class="badge" style="background:#4a044e;color:#f0abfc;margin-left:auto;">AI-scoring</span>
        </div>
        <div class="card-desc">Resultatet af sammenligningen: Hvilken score havde toilettet f√∏r og efter? Blev det forv√¶rret? Hvor sikker er systemet p√• sin vurdering?</div>
      </div>

      <div class="card" style="border-left:3px solid var(--red);">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">üî¥</span>
          <div class="card-title">Reng√∏ringsopgave</div>
          <span class="badge badge-red" style="margin-left:auto;">Handling kr√¶vet</span>
        </div>
        <div class="card-desc">Oprettes, n√•r systemet registrerer en forv√¶rring. Har status: <em>ny</em> ‚Üí <em>er p√• vej</em> ‚Üí <em>f√¶rdig</em> (eller <em>fejlvurdering</em>).</div>
      </div>

      <div class="card" style="border-left:3px solid #a855f7;">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">‚úÖ</span>
          <div class="card-title">Kvittering</div>
          <span class="badge badge-purple" style="margin-left:auto;">Bevis for reng√∏ring</span>
        </div>
        <div class="card-desc">Oprettes, n√•r reng√∏ringsteamet trykker "Reng√∏ring f√¶rdig". Dokumenterer hvorn√•r reng√∏ringen blev udf√∏rt.</div>
      </div>

      <div class="card" style="border-left:3px solid var(--text-4);">
        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
          <span style="font-size:1.2rem;">üìã</span>
          <div class="card-title">H√¶ndelseslog</div>
          <span class="badge badge-gray" style="margin-left:auto;">Audit trail</span>
        </div>
        <div class="card-desc">En kronologisk log over vigtige h√¶ndelser i systemet ‚Äî til fejlfinding og revision. L√¶ses ikke af dashboardet i denne prototype.</div>
      </div>

    </div>
  </div>

  <!-- ‚îÄ‚îÄ Status-oversigt ‚îÄ‚îÄ -->
  <div class="section">
    <div class="section-title">Reng√∏ringsopgavens mulige tilstande</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>Tilstand</th><th>Hvad betyder det?</th><th>Hvem s√¶tter den?</th></tr></thead>
        <tbody>
          <tr><td><span class="badge badge-red">Ny opgave</span></td><td>Opgaven er oprettet og venter p√• at blive taget</td><td>Systemet automatisk</td></tr>
          <tr><td><span class="badge badge-blue">Er p√• vej</span></td><td>Et teammedlem har p√•taget sig opgaven</td><td>Reng√∏ringsteamet (knap)</td></tr>
          <tr><td><span class="badge badge-green">F√¶rdig</span></td><td>Reng√∏ringen er udf√∏rt og kvitteret</td><td>Reng√∏ringsteamet (knap)</td></tr>
          <tr><td><span class="badge badge-gray">Fejlvurdering</span></td><td>Systemet vurderede forkert ‚Äî ingen reng√∏ring n√∏dvendig</td><td>Reng√∏ringsteamet (knap)</td></tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<script>
  mermaid.initialize({
    startOnLoad: true, theme: 'dark',
    themeVariables: {
      background: '#0f172a', primaryColor: '#1e3a5f',
      primaryTextColor: '#e2e8f0', primaryBorderColor: '#3b82f6',
      lineColor: '#60a5fa', edgeLabelBackground: '#1e293b', fontSize: '13px'
    },
    er: { diagramPadding: 30, useMaxWidth: true }
  });
</script>
</body>
</html>
